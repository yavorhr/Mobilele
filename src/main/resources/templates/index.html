<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/head :: head(additionalCss='/css/index.css')"></head>
<body>
<header th:replace="fragments/navbar"></header>

<main>
    <section class="hero-section">
        <div class="hero-content">
            <h1>Welcome to <span class="brand-name">Mobilele</span></h1>
            <p>Find your next car with ease ‚Äî explore trusted offers, compare prices, and connect with verified
                sellers.</p>
            <a th:href="@{/offers/find}" class="cta-btn">Find Your Offer Now üöó</a>
        </div>
    </section>

    <div th:if="${flashMessage}" class="alert-toast alert-success">
        <span class="alert-icon">
            <img src="/images/car-travel-delete.svg" alt="icon">
        </span>
        <span th:text="${flashMessage}"></span>
    </div>


    <section class="quick-search">
        <h2>Quick Search</h2>
        <p>Find the right car instantly ‚Äî filter by brand, price, or year.</p>
        <form th:action="@{/offers/find}" method="get" class="search-form">
            <input type="text" name="brand" placeholder="Brand (e.g. BMW)"/>
            <input type="number" name="maxPrice" placeholder="Max Price (BGN)"/>
            <input type="number" name="year" placeholder="Min Year"/>
            <button type="submit">Search üöó</button>
        </form>
    </section>

    <section class="recent-offers-section">
        <h2 class="section-title">Recent Offers</h2>

        <div class="offers-grid">
            <div th:each="offer : ${latestOffers}" class="offer-card">
                <a th:href="@{/offers/details/{id}(id=${offer.id})}" class="offer-card-link">
                    <div class="offer-image">
                        <img th:src="${offer.profileImage}" alt="Car image">
                    </div>
                    <div class="offer-info">
                        <h3 th:text="${offer.modelBrandName + ' ' + offer.modelName}"></h3>
                        <p class="offer-meta">
                            <span th:text="${offer.engine}"></span> ¬∑
                            <span th:text="${offer.transmission}"></span> ¬∑
                            <span th:text="${offer.mileage + ' km'}"></span>
                        </p>
                        <p class="offer-price" th:text="${offer.price + ' BGN'}"></p>
                        <p class="offer-year" th:text="${offer.modelYear}"></p>
                    </div>
                </a>
            </div>

            <div th:if="${#lists.isEmpty(latestOffers)}" class="no-offers">
                <p>No recent offers available.</p>
            </div>
        </div>

        <div class="show-all-container">
            <a th:href="@{/offers/all}" class="btn-show-all">Show All Offers ‚Üí</a>
        </div>

    </section>

    <div class="vehicle-grid">
        <!-- BMW -->
        <a th:href="@{/offers/brands/{brand}(brand='bmw')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/bmw/999999" alt="BMW" class="brand-icon">
            <h3>BMW</h3>
        </a>

        <!-- Audi -->
        <a th:href="@{/offers/brands/{brand}(brand='audi')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/audi/999999" alt="Audi" class="brand-icon">
            <h3>Audi</h3>
        </a>

        <!-- Toyota -->
        <a th:href="@{/offers/brands/{brand}(brand='toyota')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/toyota/999999" alt="Toyota" class="brand-icon">
            <h3>Toyota</h3>
        </a>

        <!-- Mercedes -->
        <a th:href="@{/offers/brands/{brand}(brand='mercedes')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/mercedes-benz/999999" alt="Mercedes" class="brand-icon">
            <h3>Mercedes</h3>
        </a>

        <!-- Volkswagen -->
        <a th:href="@{/offers/brands/{brand}(brand='volkswagen')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/volkswagen/999999" alt="Volkswagen" class="brand-icon">
            <h3>Volkswagen</h3>
        </a>

        <!-- Dacia -->
        <a th:href="@{/offers/brands/{brand}(brand='dacia')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/dacia/999999" alt="Dacia" class="brand-icon">
            <h3>Dacia</h3>
        </a>

        <!-- Tesla -->
        <a th:href="@{/offers/brands/{brand}(brand='tesla')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/tesla/999999" alt="Tesla" class="brand-icon">
            <h3>Tesla</h3>
        </a>

        <!-- Honda -->
        <a th:href="@{/offers/brands/{brand}(brand='honda')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/honda/999999" alt="Honda" class="brand-icon">
            <h3>Honda</h3>
        </a>

        <!-- Ford -->
        <a th:href="@{/offers/brands/{brand}(brand='ford')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/ford/999999" alt="Ford" class="brand-icon">
            <h3>Ford</h3>
        </a>

        <!-- Nissan -->
        <a th:href="@{/offers/brands/{brand}(brand='nissan')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/nissan/999999" alt="Nissan" class="brand-icon">
            <h3>Nissan</h3>
        </a>

        <!-- Hyundai -->
        <a th:href="@{/offers/brands/{brand}(brand='hyundai')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/hyundai/999999" alt="Hyundai" class="brand-icon">
            <h3>Hyundai</h3>
        </a>

        <!-- Kia -->
        <a th:href="@{/offers/brands/{brand}(brand='kia')}" class="vehicle-card">
            <img src="https://cdn.simpleicons.org/kia/999999" alt="Kia" class="brand-icon">
            <h3>Kia</h3>
        </a>
    </div>

    <section class="why-choose-us">
        <h2 class="section-title">Why Choose <span class="brand-name">Mobilele</span>?</h2>
        <div class="features-grid">
            <div class="feature">
                <i class="fa fa-shield"></i>
                <h3>Verified Sellers</h3>
                <p>Every seller is verified for authenticity and trustworthiness.</p>
            </div>
            <div class="feature">
                <i class="fa fa-car"></i>
                <h3>Wide Selection</h3>
                <p>Thousands of offers from top brands and private owners.</p>
            </div>
            <div class="feature">
                <i class="fa fa-clock-o"></i>
                <h3>Fast & Easy</h3>
                <p>Filter, compare, and contact sellers ‚Äî all in under a minute.</p>
            </div>
            <div class="feature">
                <i class="fa fa-money"></i>
                <h3>Transparent Prices</h3>
                <p>No hidden fees. See clear, real-time offers you can trust.</p>
            </div>
        </div>
    </section>

    <section class="reviews-section">
        <h2 class="section-title">What Our Users Say ‚≠ê</h2>

        <div class="reviews-marquee">
            <div class="reviews-track">

                <div class="review-card" th:each="feed : ${feedbacks}">
                    <div class="review-header">
                        <div class="review-info">
                            <span class="review-name" th:text="${feed.userFirstName + ' ' + feed.userLastName}">John Doe</span>
                            <span class="review-date"
                                  th:text="${#temporals.format(feed.created, 'dd MMM yyyy')}">10 Nov 2025</span>
                        </div>

                        <!-- Stars -->
                        <div class="review-stars">
                            <i class="fa fa-star"
                               th:each="i : ${#numbers.sequence(1,5)}"
                               th:classappend="${i <= feed.rating} ? 'filled' : ''"></i>
                        </div>
                    </div>

                    <p class="review-comment" th:text="${feed.comment}">
                        Great experience! Easy to find my dream car.
                    </p>
                </div>
            </div>
        </div>
    </section>
</main>

<footer></footer>

</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const toast = document.querySelector(".alert-toast");
        if (toast) {
            toast.classList.add("show");
            setTimeout(() => {
                toast.classList.remove("show");
            }, 4500); // 4.5s visible
        }
    });
</script>
</html>
