<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head(additionalCss='/css/admin/history.css')"></head>

<header th:replace="fragments/navbar"></header>

<body class="auth-layout" data-logged-in-username="${loggedInUsername}">

<main class="main-content mt-4">
    <div class="container-fluid">

        <div class="heading-wrapper">
            <h1 class="section-title" th:text="#{stats.history.title}">Stats History</h1>
        </div>

        <section class="stats-history-card">

            <table class="table stats-history-table">
                <thead>
                <tr>
                    <th th:text="#{stats.history.id}"></th>
                    <th th:text="#{stats.history.timestamp}"></th>
                    <th th:text="#{stats.history.total}"></th>
                    <th th:text="#{stats.history.auth}"></th>
                    <th th:text="#{stats.history.anon}"></th>
                    <th th:text="#{stats.history.view}"></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="s : ${snapshots}">
                    <td th:text="${s.id}"></td>
                    <td th:text="${#temporals.format(s.timeStamp, 'yyyy-MM-dd HH:mm:ss')}"></td>
                    <td th:text="${s.totalRequests}"></td>
                    <td th:text="${s.authRequests}"></td>
                    <td th:text="${s.anonRequests}"></td>
                    <td>
                        <a th:href="@{'/admin/history/' + ${s.id}}"
                           class="btn btn-submit"
                           th:text="#{stats.history.open}">
                            Open
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>

        </section>

        <div class="stats-history-back">
            <a th:href="@{/admin/statistics}"
               class="btn btn-secondary"
               th:text="#{stats.history.back}">Back to live stats</a>
        </div>
    </div>
</main>
<footer th:replace="fragments/minimal-footer"></footer>
</body>
</html>
